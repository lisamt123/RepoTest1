<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <assignments>
        <name>add_svar_to_scol</name>
        <label>add svar to scol</label>
        <locationX>1089</locationX>
        <locationY>309</locationY>
        <assignmentItems>
            <assignToReference>scolNewStories</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>svarThisStory</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Push_FR_to_Stories</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>BuildAssignment</name>
        <label>BuildAssignment</label>
        <locationX>369</locationX>
        <locationY>371</locationY>
        <assignmentItems>
            <assignToReference>varScheduledType</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>BuildType</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>scheduled_type_lookup</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Cross_BU_yes</name>
        <label>Cross BU yes</label>
        <locationX>122</locationX>
        <locationY>476</locationY>
        <assignmentItems>
            <assignToReference>varScheduledType</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>CrossBUyes</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>scheduled_type_lookup</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Push_FR_to_Story</name>
        <label>Push FR to Story</label>
        <locationX>1088</locationX>
        <locationY>464</locationY>
        <assignmentItems>
            <assignToReference>svarThisStory.agf__Assignee__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varAgileID</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>svarThisStory.RecordTypeId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varRecordTypeid</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>svarThisStory.agf__Details__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>svarThisFR.Requirement__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>svarThisStory.agf__Product_Tag__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varProductTag</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>svarThisStory.agf__Scheduled_Build__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varScheduledtypeID</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>svarThisStory.Change_Request_ID__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>CRid</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>svarThisStory.agf__Subject__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>SubjectName</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>svarThisStory.agf__Priority_Rank__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varCROrder</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>add_svar_to_scol</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Change_Type</name>
        <label>Change Type</label>
        <locationX>369</locationX>
        <locationY>45</locationY>
        <defaultConnectorLabel>[Default Outcome]</defaultConnectorLabel>
        <rules>
            <name>If_the_ChangeType_is_Feature_or_Break_Fix</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>varCRChangeType</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Feature</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>varCRChangeType</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Break-Fix</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>RecordTypeID</targetReference>
            </connector>
            <label>If the ChangeType is Feature or Break-Fix</label>
        </rules>
        <rules>
            <name>If_the_ChangeType_is_not_Feature_or_Break_Fix</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>varCRChangeType</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Break-Fix</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>varCRChangeType</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Feature</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>If_the_ChangeType_is_not_a_Feature_or_Break_Fix</targetReference>
            </connector>
            <label>If the ChangeType is not Feature or Break-Fix</label>
        </rules>
    </decisions>
    <decisions>
        <name>Cross_BU</name>
        <label>Cross BU</label>
        <locationX>129</locationX>
        <locationY>282</locationY>
        <defaultConnectorLabel>[Default Outcome]</defaultConnectorLabel>
        <rules>
            <name>Yes</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>varCRBUimpactyes</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Yes</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Cross_BU_yes</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
        <rules>
            <name>No</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>varCRBUimpactyes</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>No</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>varCRBUimpactyes</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Unknown</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>BuildAssignment</targetReference>
            </connector>
            <label>No</label>
        </rules>
    </decisions>
    <formulas>
        <name>BuildType</name>
        <dataType>String</dataType>
        <expression>{!varCRBU}+{!varCRChangeType}</expression>
    </formulas>
    <formulas>
        <name>CrossBUyes</name>
        <dataType>String</dataType>
        <expression>&quot;CrossBU&quot; + {!varCRChangeType}</expression>
    </formulas>
    <formulas>
        <name>SubjectName</name>
        <dataType>String</dataType>
        <expression>{!varCRChangeType} + &quot; - &quot; + {!varCRsubjectfield}</expression>
    </formulas>
    <label>New Non Routine CR</label>
    <loops>
        <name>Push_FR_to_Stories</name>
        <label>Push FR to Stories</label>
        <locationX>584</locationX>
        <locationY>467</locationY>
        <assignNextValueToReference>svarThisFR</assignNextValueToReference>
        <collectionReference>scolFRList</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Push_FR_to_Story</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Create_Story</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processType>Flow</processType>
    <recordCreates>
        <name>Create_Story</name>
        <label>Create Story</label>
        <locationX>583</locationX>
        <locationY>611</locationY>
        <inputReference>scolNewStories</inputReference>
    </recordCreates>
    <recordLookups>
        <name>CRLookup</name>
        <label>CRLookup</label>
        <locationX>133</locationX>
        <locationY>43</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Change_Type</targetReference>
        </connector>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>CRid</elementReference>
            </value>
        </filters>
        <object>Change_Request__c</object>
        <outputAssignments>
            <assignToReference>varAssignedTo</assignToReference>
            <field>Assigned_To__c</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>varCRBUimpactyes</assignToReference>
            <field>BU_Impact__c</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>varCRBU</assignToReference>
            <field>BU__c</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>varCRChangeType</assignToReference>
            <field>Change_Type__c</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>varCRName</assignToReference>
            <field>Name</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>varCROrder</assignToReference>
            <field>Order__c</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>varCRrequestdetailsfield</assignToReference>
            <field>Request_Details__c</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>varCRsubjectfield</assignToReference>
            <field>Subject__c</field>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <name>FR_Lookup</name>
        <label>FR Lookup</label>
        <locationX>819</locationX>
        <locationY>318</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Push_FR_to_Stories</targetReference>
        </connector>
        <filters>
            <field>Change_Request__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>CRid</elementReference>
            </value>
        </filters>
        <object>Functional_Requirement__c</object>
        <outputReference>scolFRList</outputReference>
        <queriedFields>Requirement__c</queriedFields>
        <queriedFields>Name</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>product_tag</name>
        <label>product tag</label>
        <locationX>369</locationX>
        <locationY>276</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Cross_BU</targetReference>
        </connector>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>SSG</stringValue>
            </value>
        </filters>
        <object>agf__ADM_Product_Tag__c</object>
        <outputAssignments>
            <assignToReference>varProductTag</assignToReference>
            <field>Id</field>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <name>Profile_Lookup</name>
        <label>Profile Lookup</label>
        <locationX>599</locationX>
        <locationY>207</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>User_Lookup</targetReference>
        </connector>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>VinSystem Admin</stringValue>
            </value>
        </filters>
        <object>Profile</object>
        <outputAssignments>
            <assignToReference>varProfileID</assignToReference>
            <field>Id</field>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <name>RecordTypeID</name>
        <label>RecordTypeID</label>
        <locationX>368</locationX>
        <locationY>175</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>product_tag</targetReference>
        </connector>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>User_Story</stringValue>
            </value>
        </filters>
        <filters>
            <field>SobjectType</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>agf__ADM_Work__c</stringValue>
            </value>
        </filters>
        <object>RecordType</object>
        <outputAssignments>
            <assignToReference>varRecordTypeid</assignToReference>
            <field>Id</field>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <name>scheduled_type_lookup</name>
        <label>scheduled type lookup</label>
        <locationX>371</locationX>
        <locationY>473</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Profile_Lookup</targetReference>
        </connector>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>varScheduledType</elementReference>
            </value>
        </filters>
        <object>agf__ADM_Build__c</object>
        <outputAssignments>
            <assignToReference>varScheduledtypeID</assignToReference>
            <field>Id</field>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <name>User_Lookup</name>
        <label>User Lookup</label>
        <locationX>823</locationX>
        <locationY>197</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>FR_Lookup</targetReference>
        </connector>
        <filters>
            <field>ProfileId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>varProfileID</elementReference>
            </value>
        </filters>
        <filters>
            <field>Title</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Agile Lead</stringValue>
            </value>
        </filters>
        <object>User</object>
        <outputAssignments>
            <assignToReference>varAgileID</assignToReference>
            <field>Id</field>
        </outputAssignments>
    </recordLookups>
    <screens>
        <name>If_the_ChangeType_is_not_a_Feature_or_Break_Fix</name>
        <label>If the ChangeType is not a Feature or Break-Fix</label>
        <locationX>777</locationX>
        <locationY>42</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <fields>
            <name>ChangeTypeisnotaFeatureorBreakFix</name>
            <fieldText>Cannot proceed if the ChangeType is not a &quot;Feature&quot; or &quot;Break-Fix&quot;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
    </screens>
    <startElementReference>CRLookup</startElementReference>
    <textTemplates>
        <name>emailBODY</name>
        <text>{!$Flow.FaultMessage}</text>
    </textTemplates>
    <variables>
        <name>CRid</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>requestdetailsvariable</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>scolFRList</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Functional_Requirement__c</objectType>
    </variables>
    <variables>
        <name>scolNewStories</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>agf__ADM_Work__c</objectType>
    </variables>
    <variables>
        <name>subjectvariable</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>svarThisFR</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Functional_Requirement__c</objectType>
    </variables>
    <variables>
        <name>svarThisStory</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>agf__ADM_Work__c</objectType>
    </variables>
    <variables>
        <name>userstoryvariable</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varActiveUserID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>varActiveUserProfileID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varAgileID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varAssignedTo</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varChangerequestID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varCRBU</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varCRBUimpactyes</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varCRChangeType</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varCRName</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varCROrder</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>2</scale>
    </variables>
    <variables>
        <name>varCRrequestdetailsfield</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varCRsubjectfield</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varFRid</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varName</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varNewStorycreated</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varProductTag</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varProfile</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varProfileID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varProfileName</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varRecordTypeid</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varScheduledType</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varScheduledtypeID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varStoryBuild</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varUserAdmin</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varUserName</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varUserProfile</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varWorkDescription</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varWorkScheduleBuild</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varWorkSubject</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
